<?php

define('TEST_BROWSER', '*firefox /usr/bin/firefox');
define('TEST_BASE_URL', 'http://projectfree.local/ProjectFree/application/');
//require_once('phpunitdep.php');
require_once 'PHPUnit/Extensions/SeleniumTestCase.php';


class ScreenShotTest extends PHPUnit_Extensions_SeleniumTestCase {

	public static $browsers = array(
		array(
			'name'	=> 'Firefox on Linux',
			'browser' => '*firefox /usr/lib/firefox/firefox-bin',
			'host'	=> 'localhost',
			'port'	=> 4444,
			'timeout' => 30000,
		)
	);

	protected function setUp() {
		$this->setBrowser(TEST_BROWSER);
		$this->setBrowserUrl(TEST_BASE_URL);
	}

	public function testRand() {
		$this->open('index.php');

		sleep(5);

		$this->open('index.php');

		sleep(5);
	}

	protected function getBrowserName() {
		$this->drivers[0]->getBrowser();
	}

	public function screenshotList($urls, $basepath = null) {
		foreach ($urls as $url) {
			$this->open($url);
			$this->getEval("window.resizeTo(1200, 800); window.moveTo(0,0);");
			$this->screenshot('desktop' . $this->getBrowserName() . '-' . $url, $basepath);

			$this->getEval("window.resizeTo(360, 640); window.moveTo(0,0);");
			$this->screenshot('mobile' . $this->getBrowserName() . '-' . $url, $basepath);
		}
	}
}