<?php

require_once 'main.php';

class Page_Projeto extends Main {

	public function __construct() {
		$this->setTitle('Projetos');
		parent::__construct();
	}

	public function setProject() {
		$_SESSION['projectId'] = $_GET['select'];
		redirect('index.php');
	}

	protected function listar() {
		?>
		<div class="row-fluid">
			<div class="span7 collapse-group accordion-group" id="projetos">
				<table class="table table-hover-mod">
				 	<caption>
				 		<a data-toggle="collapse" data-target="#projetos">Projetos ativos</a>
				 	</caption>
					<thead>
						<tr>
							<th>Nome</th>
							<th>Papel desempenhado</th>
						</tr>
					</thead>
					<tbody>
						<?php
						$this->retrieveList(array('nome', 'funcao'));
						?>
					</tbody>
				</table>
			</div>
			<div class="span5">
				<a class="btn btn-primary btn-large" href="projeto.php?novo=true">Cadastrar novo projeto</a>
			</div>
		</div>
		<?php
	}

	private function selecionarProjeto() {
		global $userId;
		if (true) { // Check if user belongs to project
			$_SESSION['projectId'] = 1;
			$_SESSION['gerente'] = true;
			redirect('index.php');
		}
	}


} new Page_Projeto();